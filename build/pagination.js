!function(){"use strict";function e(){document.querySelectorAll(".wp-block-dss-jobbnorge__pagination").forEach((function(e){const o=e.closest(".wp-block-dss-jobbnorge");if(!o)return;const n=o.getAttribute("data-attributes");if(!n)return;let r;try{r=JSON.parse(n)}catch(e){return void console.error("Failed to parse block attributes:",e)}const a=e.querySelector(".wp-block-dss-jobbnorge__pagination-prev"),i=e.querySelector(".wp-block-dss-jobbnorge__pagination-next");a&&!a.disabled&&a.addEventListener("click",(function(e){e.preventDefault(),t(parseInt(this.getAttribute("data-page")),r,o)})),i&&!i.disabled&&i.addEventListener("click",(function(e){e.preventDefault(),t(parseInt(this.getAttribute("data-page")),r,o)}))}))}function t(t,n,r){r.classList.add("wp-block-dss-jobbnorge__loading"),r.querySelectorAll(".wp-block-dss-jobbnorge__pagination button").forEach((function(e){e.disabled=!0}));const a=new FormData;a.append("action","jobbnorge_get_jobs"),a.append("page",t),a.append("attributes",JSON.stringify(n)),a.append("nonce",jobbnorgeAjax.nonce),fetch(jobbnorgeAjax.ajaxUrl,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(n){if(n.success){r.innerHTML=n.data.html,e();const o=r.getBoundingClientRect(),a=2*parseFloat(getComputedStyle(document.documentElement).fontSize),i=window.pageYOffset+o.top-a;window.scrollTo({top:i,behavior:"smooth"}),function(e){if(history.pushState){const t=new URL(window.location);e>1?t.searchParams.set("jobbnorge_page",e):t.searchParams.delete("jobbnorge_page"),history.pushState({page:e},"",t)}}(t)}else console.error("AJAX request failed:",n.data),o(r,"Failed to load page. Please try again.")})).catch((function(e){console.error("AJAX request error:",e),o(r,"An error occurred while loading the page.")})).finally((function(){r.classList.remove("wp-block-dss-jobbnorge__loading")}))}function o(e,t){const o=document.createElement("div");o.className="wp-block-dss-jobbnorge__error notice notice-error",o.innerHTML="<p>"+t+"</p>",e.insertBefore(o,e.firstChild),setTimeout((function(){o.parentNode&&o.parentNode.removeChild(o)}),5e3)}document.addEventListener("DOMContentLoaded",(function(){e()})),window.addEventListener("popstate",(function(e){e.state&&e.state.page&&window.location.reload()}))}();